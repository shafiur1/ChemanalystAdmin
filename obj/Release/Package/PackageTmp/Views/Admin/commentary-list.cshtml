
@{
    ViewBag.Title = "Home Page";
    Layout = "~/Views/Shared/_Layout.cshtml";
}
@model IEnumerable<ChemAnalyst.Models.SA_Commentary>
<head>
    <link href="https://cdn.datatables.net/1.10.15/css/dataTables.bootstrap.min.css" rel="stylesheet" />
    <link href="https://cdn.datatables.net/responsive/2.1.1/css/responsive.bootstrap.min.css" rel="stylesheet" />

    <script src="https://cdn.datatables.net/1.10.15/js/jquery.dataTables.min.js"></script>
    <script src="https://cdn.datatables.net/1.10.15/js/dataTables.bootstrap4.min.js "></script>
    <script type="text/javascript">
        $(document).ready(function () {
            $('#Commentarylist').DataTable({
                "ajax": {
                    "url": "../Admin/LoadCommentaryData",
                    "type": "GET",
                    "datatype": "json"
                },

                "columnDefs": [

                    {
                        "targets": [0],
                        "visible": false
                    }
                ],
                "columns": [


                    //{

                    //    "render": function (data, type, row, meta)
                    //    { return '<input id="selectall" class="styled" type="checkbox">' }
                    //},
                    { "data": "id" },
                    { "data": "Title", "autoWidth": true },
                     { "data": "Type", "autoWidth": true },
                    { "data": "Product", "autoWidth": true },
                    { "data": "CreateTime", "autoWidth": true },
                    {

                        "render": function (data, type, row, meta) {
                            debugger
                            if (row.Type == "Chemical Pricing") {
                                return '<a href="../Admin/AddCommentary/' + row.id + '"><i class="fa fa-pencil-square-o"></i></a>';
                            }
                            else
                            {
                                return '<a href="../Admin/AddCommentaryMarket/' + row.id + '"><i class="fa fa-pencil-square-o"></i></a>';
                            }
                            
                        }
                    },
                    @if (ChemAnalyst.Common.Helpers.Global.AdminRole == Convert.ToString(Session["UserRole"]))
                    {<text>
                    
                    {
                        data: null, render: function (data, type, row) {
                            return '<a href="../Admin/DeleteCommentary/' + row.id + '"><i class="fa fa-trash-o fa-lg"></i></a>';
                        }
                    },
                   </text>
                    }
                ]
            });
        });


    </script>
</head>




<div class="update-profile-wrapper">

    <h3><a href="@Url.Action("AddCommentary", "Admin")" class="btn btn-success"><i class="fa fa-plus"></i> Add Chemical Pricing Commentary</a>
        <a href="@Url.Action("AddCommentaryMarket", "Admin")" class="btn btn-success"><i class="fa fa-plus"></i> Add Market Analysis Commentary</a>
    </h3>



    <div class="white-wrapper" style="padding-top:10px">

        <div class="data-detail-wrapper table-responsive">

            <table id="Commentarylist" class="table table-striped">
                <thead>
                    <tr>
                        <th style="display:none">
                            Id
                        </th>
                        <th>Title</th>
                        <th>Type</th>
                        <th>Product</th>
                        <th>Created</th>
                        <th>Edit</th>
                        @if (ChemAnalyst.Common.Helpers.Global.AdminRole == Convert.ToString(Session["UserRole"]))
                        {

                            <th>Delete</th>
                        }
                    </tr>
                </thead>
                <tbody>
                </tbody>
            </table>
        </div>

    </div>

</div>




