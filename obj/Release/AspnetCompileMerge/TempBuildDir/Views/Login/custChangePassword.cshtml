
@{
    ViewBag.Title = "changePassword";
    Layout = "~/Views/Shared/_LayoutCustomer.cshtml";


    var success = Newtonsoft.Json.JsonConvert.SerializeObject(ViewBag.Message);
}

<div class="header-left">
    <h3 style="color:blue;text-align:left">Change Password</h3>
</div>

<div class="update-profile-wrapper">

    

    <div class="white-wrapper">

        <div class="col-md-5 col-md-offset-3" style="text-align:center">

            <div class="eq-form">

                <div class="change-pass-box">
                    <form id="changePass" action="~/Login/UpdatePassword" method="post">

                        <div class="col-md-12 form-group">

                            @Html.Hidden("LoginUser", Session["LoginUser"].ToString(), new { @id = "LoginUser", @name = "LoginUser" })
                        </div>



                        <div class="col-md-12 form-group">

                            <input type="password" name="CurPassword" id="CurPassword" value="" size="40" class="form-control" placeholder="Current Password" required>
                        </div>

                        <div class="col-md-12 form-group">

                            <input type="password" name="newPassword" id="newPassword" value="" size="40" class="form-control" placeholder="New Password" required>
                        </div>

                        <div class="col-md-12 form-group">

                            <input type="password" name="confirmpasswd" id="confirmpasswd" value="" size="40" class="form-control" placeholder="Confirm New Password" required>
                        </div>

                        <div class="password-btn">
                            <div class="btn-wrapper">

                                @*<a class="gray-btn" href="@Url.Action("Index","User")">Cancle</a>*@
                                <input type="submit" class="btn btn-success" value="Update Password">

                            </div>
                            @*<span style="color:green">@ViewBag.Message</span>*@
                        </div>

                    </form>

                </div>


            </div>

        </div>

    </div>

</div>




<script src="https://code.jquery.com/jquery-3.4.1.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-validate/1.19.0/jquery.validate.min.js"></script>
<script defer src="https://cdnjs.cloudflare.com/ajax/libs/sweetalert/2.1.0/sweetalert.min.js"></script>
<script>

    $(document).ready(function () {
        // validate the comment form when it is submitted
        var msg = @Html.Raw(success);
        if(msg=="Password Updated Successfuly.")
        {
            swal("Thank you!", "Password updated successfully. Kindly relogin.", "success")
                .then(() => {
                    document.location.href = "@Url.Action("Index")";
                        });;
        }
        else
        {
            swal("Warning", msg, "error");
        }

        // validate signup form on keyup and submit
        $("#changePass").validate({
            rules: {

                newPassword: {
                    required: true,
                    minlength: 5
                },
                confirmpasswd: {
                    required: true,
                    minlength: 5,
                    equalTo: "#newPassword"
                },

            },
            messages: {

                newPassword: {
                    required: "",
                    minlength: "",

                },
                confirmpasswd: {
                    required: "",
                    minlength: "",
                    equalTo: "Please enter the same password as above"
                },

            }
        });
    });
</script>