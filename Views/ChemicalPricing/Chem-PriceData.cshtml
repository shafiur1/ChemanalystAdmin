@model ChemAnalyst.ViewModel.DealsDetailsViewModel
@{

    var Product = Newtonsoft.Json.JsonConvert.SerializeObject(ViewBag.product);
    var ChartType = Newtonsoft.Json.JsonConvert.SerializeObject(ViewBag.ChartType);
    var range = Newtonsoft.Json.JsonConvert.SerializeObject(ViewBag.range);
    var Category = Newtonsoft.Json.JsonConvert.SerializeObject(ViewBag.Category);

    var fromdate = Newtonsoft.Json.JsonConvert.SerializeObject(Model.FromDate);
    var todate = Newtonsoft.Json.JsonConvert.SerializeObject(Model.ToDate);
}
<!DOCTYPE HTML>
<html lang="en">
<head>
    <meta charset="utf-8">

    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no, shrink-to-fit=no">

    <title>Chem Analyst</title>
    <link href="https://fonts.googleapis.com/css?family=Roboto&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Oswald|Roboto+Condensed:400,700|Work+Sans&display=swap" rel="stylesheet">
    <link href="~/css/oswald-font.css" rel="stylesheet">
    <link rel="stylesheet" href="~/css/bootstrap.min.css">
    <link rel="stylesheet" href="~/css/animate.css" type="text/css" />
    <link rel="stylesheet" href="https://maxcdn.icons8.com/fonts/line-awesome/1.1/css/line-awesome-font-awesome.min.css">
    <link rel="shortcut icon" href="images/favicon.ico">
    <!-- Owl Stylesheets -->
    <link rel="stylesheet" href="~/css/owl.carousel.min.css">
    <link rel="stylesheet" href="~/css/owl.theme.default.min.css">
    <link rel="stylesheet" href="~/css/bootstrap-multiselect.css">


    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->

    <link rel="stylesheet" href="~/css/custom.css" type="text/css" />
    <link rel="stylesheet" href="~\css/scroll.css">
    @{
        var headerData = ChemAnalyst.DAL.ProductDataStore.GetHeaderData();
    }
</head>

<body oncontextmenu="return false;">

    <header>

        <div class="container">
            <div class="row">

                <div class="col-md-4"><div class="logo"><a href="#"><img src="~/images/logo.png" alt=""></a></div></div>
                <div class="col-md-8 ml-auto">
                    <div class="top-con-bar">
                        <div class="row justify-content-end">

                            <div class="col-sm-3">
                                <div class="icon"><i class="fa fa-phone"></i></div>
                                <div class="top-bt-txt">
                                    <h4>Telephone</h4>
                                    <p>@headerData.PhoneNumber</p>
                                </div>
                            </div>
                            <div class="col-sm-4">
                                <div class="icon"><i class="fa fa-envelope"></i></div>
                                <div class="top-bt-txt">
                                    <h4>Email Address</h4>
                                    <p>@headerData.EmailAddress </p>
                                </div>
                            </div>



                        </div>
                    </div>
                </div>


            </div>
        </div>

        <div class="main-nav">
            <div class="container">
                <nav class="navbar navbar-expand-lg p-0" id="mainNav">
                    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavDropdown" aria-controls="navbarNavDropdown" aria-expanded="false" aria-label="Toggle navigation"><span class="fa fa-bars 2x"></span> Menu</button>
                    <div class="collapse navbar-collapse" id="navbarNavDropdown">
                        <ul class="navbar-nav">
                            <li class="nav-item"><a class="nav-link" href="@Url.Action("MarketAnalysisChart", "MarketAnalysis")">Market Analysis </a></li>
                            <li class="nav-item"><a class="nav-link" href="@Url.Action("ChecmPriceChart", "ChemicalPricing")">Chemical Pricing</a></li>
                            <li class="nav-item"><a class="nav-link" href="@Url.Action("Reportsection", "Industry")">Industry Reports</a></li>
                            <li class="nav-item"><a class="nav-link" href="@Url.Action("CompanyProfile", "Company")">Company Profile</a></li>
                            <li class="nav-item"><a class="nav-link" href="@Url.Action("NewsHome", "NewsAndDeals")">News</a></li>
                            <li class="nav-item"><a class="nav-link" href="@Url.Action("DealsHome", "NewsAndDeals")">Deals</a></li>
                            <li class="nav-item"><a class="nav-link" href="@Url.Action("Contact", "ChemAnalyst")">Contact Us</a></li>
                            <li class="nav-item"><a class="nav-link" href="@Url.Action("FreeTrail", "ChemAnalyst")"> Free Trial</a> </li>
                            <li class="nav-item"><a class="nav-link" href="@Url.Action("Index", "Login")"><i class="fa fa-user"></i> Login</a></li>
                            <li class="nav-item"><a class="nav-link" href="@Url.Action("Index", "ChemAnalyst")"><i class="fa fa-home"></i> Home</a></li>
                        </ul>
                    </div>

                </nav>
            </div>
        </div>

    </header>

    <div class="inner-banner">
        <img src="images/about-banner.jpg">
        <h1>Chemical Pricing</h1>

        <ol class="breadcrumb">
            <li class="breadcrumb-item"><a href="/">Home</a></li>
            <li class="breadcrumb-item active" aria-current="page">Chemical Pricing</li>
        </ol>

    </div>


    <div class="page-content">
        <div class="static-page">
            <div class="container">



                <div class="row">

                    <div class="col-md-9">

                        <div class="common-desc">
                            <p style="text-justify:auto; line-height:25px; font-size:1rem">Access spot and bulk prices for more than 175 chemical and petrochemical products on daily / weekly / monthly and annual basis. Analyze historical and forecast price trends which will not only support you in managing your inventory but will also help in making right purchase decision leading to increased margins.</p>
                        </div>

                        <div class="filter-chart-type">
                            @using (Html.BeginForm("ShowChart", "ChemicalPricing", null, FormMethod.Post, new { @id = "ShowChart", enctype = "multipart/form-data" }))
                            {
                            <div class="row">
                                <div class="col-md-4  mt10">
                                    <p><i class="fa fa-bars"></i> Category</p>
                                    @Html.DropDownList("category", new SelectList(ViewBag.ProductList, "Value", "Text"), "Please select category", new { @id = "category", @class = "btn btn-primary width100", required = "required", oninvalid = "this.setCustomValidity('Please select Category')", onchange = "try{setCustomValidity('')}catch(e){}" })


                                </div>
                                <div class="col-md-4  mt10">
                                    <p><i class="fa fa-list"></i> Product</p>
                                    <select class="btn btn-primary width100" id="ddlProduct" name="ddlProduct" required="required" oninvalid="this.setCustomValidity('Please select product')" onchange="try{setCustomValidity('')}catch(e){}"></select>
                                </div>

                                <div class="col-md-4 mt10">
                                    <p><i class="fa fa-random"></i> Range</p>
                                    <select id="ddlRange" name="ddlRange" class="btn btn-primary width100" required="required" oninvalid="this.setCustomValidity('Please select Range')" onchange="try{setdtval();setCustomValidity('')}catch(e){}">
                                        <option value="">Select Range</option>
                                        <option value="Yearly">Yearly</option>
                                        <option value="Monthly">Monthly</option>
                                        @*<option value="Quarterly">Quarterly</option>*@
                                        <option value="Weekly">Weekly</option>
                                        <option value="Daily Retail">Daily Retail</option>
                                        <option value="Daily Bulk">Daily Bulk</option>
                                    </select>

                                </div>
                                <div class="col-md-4  mt10">
                                    <p><i class="fa fa-bar-chart"></i> Chart Types</p>
                                    <select class="btn btn-primary width100" id="ddlChart" name="ddlChart">
                                        <option value="line">Line Chart</option>
                                        <option value="bar">Bar Chart</option>
                                        <option value="pie">Pie Chart</option>
                                    </select>
                                </div>

                                <div style="display:@(ViewBag.QYears == null ? "" : "none")" class="col-md-4 dtcol mt10">
                                    <p><i class="fa fa-bar-chart"></i> From Date</p>
                                    <input type="text" class="btn btn-primary width100" id="fromdate" name="fromdate" autocomplete="off" />

                                </div>
                                <div style="display:@(ViewBag.QYears == null ? "" : "none")" class="col-md-4 dtcol mt10">
                                    <p><i class="fa fa-bar-chart"></i> To Date</p>
                                    <input type="text" class="btn btn-primary width100" id="todate" name="todate" autocomplete="off" />

                                </div>

                                <div style="display:@(ViewBag.QYears != null ? "" : "none")" class="col-md-4 yrcol  mt10">
                                    <p><i class="fa fa-bar-chart"></i> Year</p>
                                    <select class="btn btn-primary width100" id="ddlyear" name="ddlyear">
                                        <option value="@DateTime.Now.Year">@DateTime.Now.Year</option>
                                    </select>
                                </div>

                                <div style="display:@(ViewBag.FromYears != null ? "" : "none")" class="col-md-4 FromYearscol  mt10">
                                    <p><i class="fa fa-bar-chart"></i> From Year</p>
                                    @Html.DropDownListFor(m => m.FromYear, ChemAnalyst.DAL.ProductDataStore.GetUniqueYearsChemical(), "Select from", new { @class = "btn btn-primary width100", @id = "ddlFyear", @name = "ddlFyear", onchange = "changeFrom()" })
                                </div>
                                <div style="display:@(ViewBag.ToYears != null ? "" : "none")" class="col-md-4 ToYearscol  mt10">
                                    <p><i class="fa fa-bar-chart"></i> To Year</p>
                                    @Html.DropDownListFor(m => m.ToYear, ChemAnalyst.DAL.ProductDataStore.GetUniqueYearsChemical(), "Select to", new { @class = "btn btn-primary width100", @id = "ddlToYear", @name = "ddlToYear" })
                                </div>

                                <div class="col-md-4 mt10" style="display:none">
                                    <p>
                                        <i class="fa fa-compress"></i> Comparision
                                    </p>
                                    <select name="example-getting-started" id="example-getting-started" class="btn btn-primary width100" multiple="multiple"> </select>
                                    <option selected="selected" value="xyz">Xyz</option>
                                    <option selected="selected" value="pqr">Pqr</option>
                                    <option value="lmn">Lmn</option>


                                </div>
                                <input type="hidden" id="MaxValue" name="MaxValue" value="" />
                                <input type="hidden" id="MinValue" name="MinValue" value="" />

                                <input type="hidden" id="ClearValue" name="ClearValue" value="" />
                                <div class="col-md-2 mt10">
                                    <button type="submit" onclick="SubmitForm()" class="btn btn-green mt27" id="ViewChart" value="ViewChart" name="submit">
                                        <i class="fa fa-refresh"></i>
                                        View Chart
                                    </button>



                                    @*<button type="submit" class="btn btn-green mt30" id="submit" value="Reset" name="submit" style="display:none">
                <i class="fa fa-refresh"></i>
                Reset
            </button>
            <span style="cursor:pointer" class="btn btn-green mt30" onclick="generatePDF()">Export as PDF</span>*@

                                </div>
                            </div>
                            }
                        </div>


                        <div class="filter-checkbox-btn">


                            <ul>

                                <span> <b>There is no data available with selected range.</b></span>

                            </ul>

                        </div>





                    </div>


                    <div class="col-md-3">
                        <aside>
                            <h3><i class="fa fa-bell-o"></i> News <a href="@Url.Action("NewsHome","NewsAndDeals")" class="pull-right" style="font-size: 14px; margin-top: 4px; color:#fff">View all</a></h3>
                            <div class="side-news-feed">
                                @foreach (var news in Model.NewsList)
                                {
                                    <div class="news-feed-col">
                                        <a style="font-size: 14px;font-weight: 600;" href="@Url.Action("NewsDetails", "NewsAndDeals", new { id = news.GenerateItemNameAsParam() })">
                                            @{

                                                <span>
                                                    @Html.Raw(WebUtility.HtmlDecode(news.NewsName))
                                                </span>


                                            }


                                            <div class="right-news-desc2" style="font-size:14px">
                                                <br />
                                                <p><i class="fa fa-calendar-o"></i>@news.CreatedTime.ToString("MMM/yyyy")</p>
                                            </div>
                                        </a>

                                    </div>

                                }
                            </div>
                            <div class="mt-4">
                                <h3><i class="fa fa-thumbs-up"></i> Top Deals <a href="@Url.Action("DealsHome","NewsAndDeals")" class="pull-right" style="font-size: 14px; margin-top: 4px; color:#fff">View all</a></h3>
                                <div class="side-news-feed" style="">
                                    @foreach (var item in Model.DealList)
                                    {
                                        <div class="news-feed-col">
                                            <a style="font-size: 14px;font-weight: 600;" href="@Url.Action("DealsDetails", "NewsAndDeals", new { id = item.GenerateItemNameAsParam() })">
                                                @{

                                                    <span>
                                                        @Html.Raw(WebUtility.HtmlDecode(item.DealsName))
                                                    </span>


                                                }
                                                <div class="right-news-desc2">
                                                    <br />
                                                    <p><i class="fa fa-calendar-o"></i>@item.CreatedTime.Value.ToString("MMM/yyyy")</p>
                                                </div>
                                            </a>

                                        </div>
                                    }
                                </div>
                                </div>
</aside>
                    </div>



                </div>

            </div>
        </div>
    </div>


    <!-- The Modal -->
    <div class="modal" id="myModal">
        <div class="modal-dialog">
            <div class="modal-content login-pic">
                <div class="modal-body">
                    <div class="row">
                        <div class="col-md-6">
                            <div class="login-pic">
                                <div class="freeSub">
                                    <h2 style="color:black">Get Chemical Pricing in few-clicks.</h2>
                                    <a target="_blank" href="@Url.Action("FreeTrail", "ChemAnalyst")" class="btn btn-yellow">Subscribe Today</a>
                                    <a href="~/ChemicalPricing/ChecmPriceYearlyChart?Customer=False" class="btn btn-yellow">Go Back</a>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6">

                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>


    <footer>
        <div class="container-fluid">
            <div class="footer-bottom">
                <div class="row">
                    <div class="col-lg-4">
                        <p>
                            <table>
                                <tr><a href="#"><i class="fa fa-twitter" style="font-size:27px;color:white"></i></a></tr>
                                <tr><a href="#"><i class="fa fa-facebook" style="font-size:27px;color:white"></i></a></tr>
                                <tr><a href="#"><i class="fa fa-linkedin" style="font-size:27px;color:white"></i></a></tr>
                            </table>
                        </p>

                    </div>
                    <div class="col-lg-2">
                        <div class="foot-links">
                            <p><a href="@Url.Action("AboutUs", "ChemAnalyst")">About Us</a></p>

                        </div>
                    </div>
                    <div class="col-lg-2">
                        <div class="foot-links">
                            <p><a href="@Url.Action("Faq", "ChemAnalyst")">FAQs</a></p>
                        </div>
                    </div>
                    <div class="col-lg-2">
                        <div class="foot-links">
                            <p><a href="@Url.Action("Privacypolicy", "ChemAnalyst")">Privacy Policy</a></p>

                        </div>
                    </div>
                    <div class="col-lg-2">
                        <div class="foot-links">

                            <p><a href="@Url.Action("Terms", "ChemAnalyst")">Terms &amp; Conditions</a></p>
                        </div>
                    </div>
                </div>
                <div class="copyright text-center">
                    <p>Copyright 2019. Chem Analyst. All Rights Reservered. </p>
                </div>
            </div>
        </div>
    </footer>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.0/jquery.min.js"></script>
    <script src="~/js/popper.min.js"></script>
    <script src="~/js/bootstrap.min.js"></script>
    <script src="~/js/bootstrap-multiselect.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-validate/1.19.0/jquery.validate.min.js"></script>

    <script src="~/js/owl.carousel.js"></script>
    <script src="~/js/wow.min.js"></script>
    <script src="~/js/honey-custom.js"></script>
    <script src="~/js/Chart.min.js"></script>
    <script src="~/js/utils.js"></script>

    <link rel="stylesheet" type="text/css" href="~/css/jquery.datetimepicker.css">
    <link rel="stylesheet" href="//code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">
    @*<script src="https://code.jquery.com/jquery-1.12.4.js"></script>*@
    <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>


    <script src="jquery.js"></script>
    <script src="~/js/jquery.datetimepicker.full.min.js"></script>

    <script src="~/js/html2pdf.bundle.min.js"></script>



    <script type="text/javascript" src="https://oss.sheetjs.com/js-xlsx/xlsx.core.min.js"></script>
    <script type="text/javascript" src="https://oss.sheetjs.com/js-xlsx/ods.min.js"></script>
    <script type="text/javascript" src="https://sheetjs.com/demos/Export2Excel.js"></script>


    <script src="https://igniteui.com/js/external/FileSaver.js"></script>
    <script src="https://igniteui.com/js/external/Blob.js"></script>

    <script src="https://www.github.developerdan.com/table-to-json/javascripts/jquery.tabletojson.min.js"></script>
    <script defer src="https://cdnjs.cloudflare.com/ajax/libs/sweetalert/2.1.0/sweetalert.min.js"></script>
    <script>

        function SubmitResetForm()
        {
            $("#submit").trigger("click");
        }

        $(document).ready(function() {
        });

    </script>
    <script type="text/javascript">
        $(function () {
            $("#todate").datepicker("option", "disabled", true);
            var today = new Date();
            jQuery('#fromdate').datepicker({
                changeMonth: true,
                changeYear: true,
                maxDate: today,
                onSelect: function (selected) {
                    var diff = 30;
                    if ($("#ddlRange").val() == "Yearly") {
                        diff = (365 * 500);
                    }
                    if ($("#ddlRange").val() == "Monthly") {
                        diff = (365 * 3);
                    }
                    if ($("#ddlRange").val() == "Quarterly") {
                        diff = (365);
                    }
                    if ($("#ddlRange").val() == "Weekly" || $("#ddlRange").val() == "Daily Retail" || $("#ddlRange").val() == "Daily Bulk") {
                        diff = (29);
                    }
                    if ($("#ddlRange").val() == "Daily Retail" || $("#ddlRange").val() == "Daily Bulk") {
                        $("#todate").removeAttr("disabled");
                        $("#todate").datepicker("option", "maxDate", new Date());
                    }
                    else
                    {
                        var dt = new Date(selected);
                        dt.setDate(dt.getDate() + diff);
                        $("#todate").removeAttr("disabled");
                        $("#todate").datepicker("option", "maxDate", dt);

                        $("#todate").datepicker("option", "minDate", new Date(selected));
                    }
                }
            });
            jQuery('#todate').datepicker({
                changeMonth: true,
                changeYear: true,
                onSelect: function (selected) {
                    maxDate: today
                    debugger;
                    var diff = 30;
                    if ($("#ddlRange").val() == "Yearly") {
                        diff = (365 * 500);
                    }
                    if ($("#ddlRange").val() == "Monthly") {
                        diff = (365 * 3);
                    }
                    if ($("#ddlRange").val() == "Quarterly") {
                        diff = (365);
                    }
                   if ($("#ddlRange").val() == "Weekly" || $("#ddlRange").val() == "Daily Retail" || $("#ddlRange").val() == "Daily Bulk") {
                        diff = (29);
                    }
                    if ($("#ddlRange").val() == "Daily Retail" || $("#ddlRange").val() == "Daily Bulk") {
                        var det = new Date(selected);
                        det.setDate(det.getDate() + diff);
                        $("#todate").datepicker("option", "disabled", false);
                        $("#todate").datepicker("option", "maxDate", det);
                    }

                    var dt = new Date(selected);
                    dt.setDate(dt.getDate() - diff);
                    if ($("#ddlRange").val() != "Yearly") {
                        var dtt = $('#fromdate').datepicker('getDate');

                        var dt = new Date(dtt);
                        dt.setDate(dt.getDate() + diff);

                        $("#todate").datepicker("option", "maxDate", dt);
                        $("#todate").datepicker("option", "minDate", new Date(dtt));
                    }
                }
            });

        });


        function exportToExcel(tableId, tableName) {
            //showloader();
            debugger;
            setTimeout(function () { export_table_to_excel(tableId, 'xlsx' || 'xlsx', tableName); }, 100);


        }

        function export_table_to_excel(id, type, fn) {
            debugger;

            var table ;
            if (id == 'tbllince') {
                $("#exportResult").show();
                // tbllince
                table = $('#tbllince').tableToJSON();
                $("#exportResult").hide();
            }
            else {
                table = $('#tblRegisteredUsers').tableToJSON();
            }
            //var data = JSON.stringify(table);
            var data = JSON.parse(JSON.stringify(table));

            //console.log(data)
            // setTimeout(function () {  }, 5000);
            var ws = XLSX.utils.json_to_sheet(data);

            /* add to workbook */
            var wb = XLSX.utils.book_new();
            XLSX.utils.book_append_sheet(wb, ws, "tbl");

            /* generate an XLSX file */
            XLSX.writeFile(wb, fn+type);
            //setTimeout(function () { hideloader(); }, 100);
        }


    </script>
    <script>
        $(document).ready(function () {
            var range = $(ddlRange).find("option:selected").val();
            var ddlCustomers = $("#ddlChart");

              if (range == "Yearly") {
                 $(".dtcol").hide();
                 $(".FromYearscol").show();
                 $(".ToYearscol").show();
            }
            if (range == "Daily Retail" || range == "Daily Bulk") {
                ddlCustomers.empty().append('<option selected="selected" value="line" >Line Chart</option>');
            }
            else if(range == "Quarterly")
            {
                ddlCustomers.empty().append('<option selected="selected" value="bar" >Bar Chart</option>');
            }
            else if(range == "Monthly")
            {
                ddlCustomers.empty().append('<option selected="selected" value="line" >Line Chart</option><option value="bar" >Bar Chart</option>');
            }
            else if(range == "Weekly")
            {
                ddlCustomers.empty().append('<option selected="selected" value="line" >Line Chart</option><option value="bar" >Bar Chart</option>');
            }
            else {
                ddlCustomers.empty().append('<option selected="selected" value="line" >Line Chart</option><option value="bar" >Bar Chart</option>');
            }


            ShowCommentariesByDeafult()
        });

        $("body").on("change", "#ddlRange", function () {
            var range=$(ddlRange).find("option:selected").val();
            var ddlCustomers = $("#ddlChart");


            if (range == "Daily Retail") {
                swal("Please select only 30 days to see Daily Retail Pricing!")
                //alert("Please select only 30 days to see daily Retail data.");
                ddlCustomers.empty().append('<option selected="selected" value="line" >Line Chart</option>');
            }
            else if (range == "Daily Bulk") {
                swal("Please select only 30 days to see Daily Bulk Pricing!")
                ddlCustomers.empty().append('<option selected="selected" value="line" >Line Chart</option>');
            }
            else if(range == "Quarterly")
            {
                ddlCustomers.empty().append('<option selected="selected" value="bar" >Bar Chart</option>');
            }
            else if(range == "Monthly")
            {
                swal("Please select 36 Months date range!")
                ddlCustomers.empty().append('<option selected="selected" value="line" >Line Chart</option><option value="bar" >Bar Chart</option>');
            }
            else if(range == "Weekly")
            {
                ddlCustomers.empty().append('<option selected="selected" value="line" >Line Chart</option><option value="bar" >Bar Chart</option>');
            }
            else {
                ddlCustomers.empty().append('<option selected="selected" value="line" >Line Chart</option><option value="bar" >Bar Chart</option>');
            }
        });

        function ShowCommentaries()
        {
           
            var  ProductId = $('#ddlProduct').val();
            $.ajax({
                type: "POST",
                url: "../ChemicalPricing/GetCommentaries",
                data: "{ ProductId:"+ ProductId +"}" ,
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                async: false,
                success: function (response) {
                    $("#Commentaries").html('');
                    $.each(response, function () {
                        debugger;
                        //ddlCustomers.append($("<option></option>").val(this['Value']).html(this['Text']));
                        $("#Commentaries").append($("<h3 style='font-size:20px !important; font-weight: bold;'> "+this.Text+" </h3>")).append($("<p style='font-size:14px !important'> "+this.Value+" </p>"));
                    });

                    $("#Comentery").show()

                },
                failure: function (response) {
                    // alert(response.responseText);
                },
                error: function (response) {
                    // alert(response.responseText);
                }
            });
        }

        function ShowCommentariesByDeafult()
        {
                       //debugger;
            var  ProductId = 'None';
            $.ajax({
                type: "POST",
                url: "../ChemicalPricing/GetCommentaries/ProductId?=None",
                //data: "{ ProductId: "+ ProductId +"}" ,
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                async: false,
                success: function (response) {
                    $("#Commentaries").html('');
                    $.each(response, function () {
                        debugger;
                        //ddlCustomers.append($("<option></option>").val(this['Value']).html(this['Text']));
                        $("#Commentaries").append($("<h3 style='font-size:20px !important; font-weight: bold;'> "+this.Text+" </h3>")).append($("<p style='font-size:14px !important'> "+this.Value+" </p>"));
                    });



                },
                failure: function (response) {
                    // alert(response.responseText);
                },
                error: function (response) {
                    // alert(response.responseText);
                }
            });
        }



    </script>
    <script>
        function SubmitForm() {

            var Product = @Html.Raw(Product);
            var ChartType = @Html.Raw(ChartType);
            var range = @Html.Raw(range);
            var Category = @Html.Raw(Category);


            //  $('#ddlProduct').val();
            if ( $('#ddlProduct').val()!=Product && $('#ddlProduct').val()!='')// Calling validation function
            {
                $('#myModal').modal({backdrop: 'static', keyboard: false});
                event.preventDefault();
            }

        }


        function ResetForm()
        {
            var Product = @Html.Raw(Product);
            var ChartType = @Html.Raw(ChartType);
            var range = @Html.Raw(range);
            var Category = @Html.Raw(Category);

            $('#ClearValue').val('ClearMaxValue');

            //  $('#ddlProduct').val();
            if ( $('#ddlProduct').val()!=Product && $('#ddlProduct').val()!='')// Calling validation function
            {
                $('#myModal').modal({backdrop: 'static', keyboard: false});
                event.preventDefault();
            }

        }
        $("body").on("change", "#category", function () {
            var CatId=$(category).find("option:selected").val();

            var ddlCustomers = $("#ddlProduct");
            //  var ddlCompare = $("#example-getting-started");
            // example-getting-started
            ddlCustomers.empty().append('<option selected="selected" value="" disabled = "disabled">Loading.....</option>');
            $.ajax({
                type: "POST",
                url: "../ChemicalPricing/GetProductName",
                data: "{ CatId:"+ CatId +"}" ,
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                async: false,
                success: function (response) {
                    ddlCustomers.empty().append('<option selected="selected" value=""> select Product</option>');
                    //ddlCompare.empty().append('<option selected="selected" value="0"> select Product</option>');

                    $.each(response, function () {
                        ddlCustomers.append($("<option></option>").val(this['Value']).html(this['Text']));
                        // ddlCompare.append($("<option  ></option>").val(this['Value']).html(this['Text']));

                    });
                    $("#example-getting-started").multiselect();
                    // alert("category call");
                },
                failure: function (response) {
                    // alert(response.responseText);
                },
                error: function (response) {
                    // alert(response.responseText);
                }
            });
        });




  




       


        window.onload = function () {
            var Product = @Html.Raw(Product);
            var ChartType = @Html.Raw(ChartType);
            var range = @Html.Raw(range);
            var from = @Html.Raw(fromdate);
            var to = @Html.Raw(todate);
            var Category = @Html.Raw(Category);

            $('#category').val(Category).trigger('change');;

            $('#ddlProduct').val(Product);
            $('#ddlChart').val(ChartType);
            $('#ddlRange').val(range);

            $('#fromdate').val(from);
            $('#todate').val(to);
            $('#ddlChart').val(ChartType);
            Drowchart('canvas', ChartType);
            var  cyear ='@(ViewBag.CYear==null?"": ViewBag.CYear)'

            if(cyear!= "") {
                $("#ddlyear").val(cyear)
            }

            //Drowchart('canvas2','bar');
            var selected = $("#ddlRange option:selected").text();
            debugger
            if (selected == "Yearly") {
                $("#slidecontainer1").show()
            }
            else
            {
                $("#slidecontainer1").hide()
            }
             $('#ddlFyear').val('@(ViewBag.FromYear== null?"": ViewBag.FromYear)');
            $('#ddlToYear').val('@(ViewBag.ToYear==null?"": ViewBag.ToYear)');
        };


        document.getElementById('drowchart').addEventListener('change', function () {
            var d = document.getElementById('drowchart').value;
            //alert(d);
            debugger
            Drowchart('canvas', d);
        });



        document.getElementById('randomizeData').addEventListener('click', function () {
            config.data.datasets.forEach(function (dataset) {
                dataset.data = dataset.data.map(function () {
                    return randomScalingFactor();
                });

            });

            window.myLine.update();
        });

        var colorNames = Object.keys(window.chartColors);
        document.getElementById('addDataset').addEventListener('click', function () {

            var colorName = colorNames[config.data.datasets.length % colorNames.length];
            var newColor = window.chartColors[colorName];
            var newDataset = {
                label: 'Dataset ' + config.data.datasets.length,
                backgroundColor: newColor,
                borderColor: newColor,
                data: [],
                fill: false
            };

            for (var index = 0; index < config.data.labels.length; ++index) {
                newDataset.data.push(randomScalingFactor());
            }

            config.data.datasets.push(newDataset);
            window.myLine.update();
        });

        document.getElementById('addData').addEventListener('click', function () {
            if (config.data.datasets.length > 0) {
                var month = MONTHS[config.data.labels.length % MONTHS.length];
                config.data.labels.push(month);

                config.data.datasets.forEach(function (dataset) {
                    dataset.data.push(randomScalingFactor());
                });

                window.myLine.update();
            }
        });

        document.getElementById('removeDataset').addEventListener('click', function () {
            config.data.datasets.splice(0, 1);
            window.myLine.update();
        });

        document.getElementById('removeData').addEventListener('click', function () {
            config.data.labels.splice(-1, 1); // remove the label first

            config.data.datasets.forEach(function (dataset) {
                dataset.data.pop();
            });

            window.myLine.update();
        });


        function setdtval() {
        debugger
            $(".lgndchk").hide();
            $('input[name="hiddenLegends"]').val("");
            if($("#ddlRange").val() =="Quarterly"  || $("#ddlRange").val()   ==  "Weekly"){
                $(".dtcol").hide();
                $(".yrcol").show();
                $(".FromYearscol").hide();
                $(".ToYearscol").hide();
            }
            else if ($("#ddlRange").val() =="Yearly")
            {
                $(".dtcol").hide();
                $(".FromYearscol").show();
                $(".ToYearscol").show();
            }
            else {
                 $(".FromYearscol").hide();
                 $(".ToYearscol").hide();
                 $(".dtcol").show();
                 $(".yrcol").hide();
                 resetdates()
            }
            if($("#ddlRange").val() =="Quarterly"){


            }
        }

        $(document).ready(function () {

            //if("#ddlRange option:selected").text()=="Yearly") {
            //    $("#slidecontainer").show();
            //}



            $("#ShowChart").validate({
                debug: true,
                rules: {
                    ddlProduct: {
                        required: function () {
                            if ($("#ddlProduct option[value='0']")) {
                                return true;
                            } else {
                                return false;
                            }
                        }
                    },
                    ddlChart: {
                        required: function () {
                            if ($("#ddlChart option[value='0']")) {
                                return true;
                            } else {
                                return false;
                            }
                        }
                    }, ddlRange: {
                        required: function () {
                            if ($("#ddlRange option[value='0']")) {
                                return true;
                            } else {
                                return false;
                            }
                        }
                    }
                },
                messages: {
                    ddlRange: "range Required",
                },
            });


        })


        //  $('#ddlRange').on('change', function() {
        //alert( this.value );
        //  });

    </script>


    <script>
        var slider = document.getElementById("myRange");
        var output = document.getElementById("demo");
        output.innerHTML = slider.value;


        document.getElementById("myRange").onmousedown = function () { mouseDown() };
        document.getElementById("myRange").onmouseup = function () { mouseUp() };

        function mouseDown() {
            //document.getElementById("demo").innerHTML = "The mouse button is held down.";
        }

        function mouseUp() {
            output.innerHTML = slider.value;
            //alert(slider.value)

            $("#MinValue").val($("#myRange").attr("min"));
            $("#MaxValue").val(slider.value);

            $(".mt27").trigger("click");

        }
    </script>
    <script>
        //function generatePDF() {
        //  // Choose the element that our invoice is rendered in.
        //  const element = document.getElementById("invoice");
        //  // Choose the element and save the PDF for our user.
        //  html2pdf().from(element).save();
        //}

        function generatePDF() {
            //// Choose the element that our invoice is rendered in.
            //const element = document.getElementById("invoice");
            //// Choose the element and save the PDF for our user.
            //html2pdf()
            //  .set({ html2canvas: { scale: 4, orientation: 'landscap' } })
            //  .from(element)
            //  .save();


            var element = document.getElementById('invoice');
            debugger
            // Choose pagebreak options based on mode.
            var mode = "avoid-all";
            var pagebreak = (mode === 'specify') ?
            { mode: '', before: '.before', after: '.after', avoid: '.avoid' } :
            { mode: mode };

            $("#exportxls2").hide();
            $("#hrefComentery").hide();
            $("#slidecontainer1").hide();
            $("#submitReset").hide();


            // Generate the PDF.
            html2pdf().from(element).set({
                filename: "Chemical-Pricing-Export" + '.pdf',
                pagebreak: pagebreak,
                jsPDF: {orientation: 'landscape', unit: 'in', format: 'letter', compressPDF: true}
            }).save().then(function(pdf) {
                //This logs the right base64
                $("#hrefComentery").show();
                $("#exportxls2").show();
                $("#slidecontainer1").show();
                $("#submitReset").show();

                // window.location.reload();
            });;



        }
    </script>

</html>