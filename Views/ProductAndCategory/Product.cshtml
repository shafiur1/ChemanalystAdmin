
@{
    ViewBag.Title = "Home Page";
    Layout = "~/Views/Shared/_Layout.cshtml";
}
    <head>
        <link href="https://cdn.datatables.net/1.10.15/css/dataTables.bootstrap.min.css" rel="stylesheet" />
        <link href="https://cdn.datatables.net/responsive/2.1.1/css/responsive.bootstrap.min.css" rel="stylesheet" />
        <script src="https//cdnjs.cloudflare.com/ajax/libs/moment.js/2.18.1/moment.min.js"></script>
        <script src="https://cdn.datatables.net/1.10.15/js/jquery.dataTables.min.js"></script>
        <script src="https://cdn.datatables.net/1.10.15/js/dataTables.bootstrap4.min.js "></script>
        <script src="~/js/date.format.js"></script>
        <script>

            $(document).ready(function () {
                $('#role').DataTable({
                    "ajax": {

                        "url": "../ProductAndCategory/ProductList",
                        "type": "GET",
                        "datatype": "json"
                    },
                    fields: [{
                        label: 'CreatedTime:',

                    }],
                    "columnDefs": [

                        {
                            "targets": [0],
                            "visible": false
                        }
                    ],
                    "columns": [
                        { "data": "id" },
                        { "data": "ProductName" },
                        { "data": "ProductDiscription" },
                        {
                            "data": "CreatedTime", type: "datetime",
                            "render": function (data) {
                                var nowDate = new Date(parseInt(data.substr(6)));
                                var result = "";
                                result += nowDate.format("mmm-dd-yy HH:MM:ss");
                                return result;
                            }
                        },
                        {

                            "render": function (data, type, row, meta) {
                                debugger
                                //return '<button type="button" class="btn btn-success">Approved</button>';
                                if (row.status == 1) {
                                    return '<button type="button" class="btn btn-success" id="btnStatus" onclick="UpdateStatus(' + row.id + ')">Approved</button>';
                                }
                                else {
                                    return '<button type="button" class="btn btn-danger" id="btnStatus" onclick="UpdateStatus(' + row.id + ')">Disapprove</button>';
                                }
                            }
                        },
                        {

                            "render": function (data, type, row, meta) { return '<a href="../ProductAndCategory/EditProduct/' + row.id + '"><i class="fa fa-pencil-square-o"></i></a>'; }
                        },
                        {
                            data: null, render: function (data, type, row) {
                                return '<a href="../ProductAndCategory/DeleteProduct/' + row.id + '"><i class="fa fa-trash-o fa-lg"></i></a>';
                            }
                        },
                    ]
                });
            });

            function UpdateStatus(productId) {
            $.ajax({
                url: "UpdateStatus",
                type: "POST",
                data: { productId: productId },
                cache: false,
                async: true,
                success: function (data) {
                    window.location.reload(true);
                }

            })
        }
        </script>
    </head>


	





	
	
<div class="update-profile-wrapper">

<h3><a href="@Url.Action("AddProduct","ProductAndCategory")" class="btn btn-success"><i class="fa fa-plus"></i> Add New Product</a></h3>


<div class="white-wrapper" style="padding-top:10px">

<div class="data-detail-wrapper table-responsive">

<table id="role"class="table table-striped">
<thead>
<tr>
    <th>ID</th>
<th>Name</th>
<th>Category</th>
<th>Created</th>
<th>Status</th>
<th>Edit</th>
<th>Delete</th>
</tr>
</thead>
<tbody>
@*@foreach (var role in Model)
{
<tr>
  
  <td>@role.Role</td>
  <td>@role.RoleDiscription </td>
  <td>@role.CreatedTime</td>
  <td><button type="button" class="btn btn-success">
    Approved</button></td>
  <td><a href="hedit-user/26"><i class="fa fa-pencil-square-o"></i></a></td>
  <td><a site_url=" onclick="deleteUser(26)" href="javascript:void(0)"><i class="fa fa-trash-o fa-lg"></i></a></td>
</tr>
}*@



</tbody>
</table>
  
 
  


</div>	

</div>	
			
	
	
</div>
	
		
	
	
	
	
	
		

